<app-base-modal-form
  [id]="modal_id"
  title="Agrega una nueva experiencia"
  description="Describe y agrega la nueva experiencia laboral."
>
  <form [formGroup]="workExperienceForm" (ngSubmit)="submitForm()">
    <div class="mb-8">
      <div class="grid gap-4">
        <app-text-input
          [id]="'empresa-1'"
          label="Empresa"
          placeholder="Nombre de la empresa"
          [value]="companyValue"
          [isDisabled]="disableTextInput"
          formControlName="company"
        >
        </app-text-input>

        <app-checkbox-input
          [id]="'checkboxWorkingHere'"
          label="Aquí en Fractal"
          [isChecked]="isCompanyFractal"
          (isCheckedChange)="companyIfChecked($event)"
          formControlName="isCompanyFractal"
        ></app-checkbox-input>

        <div
          class="grid gap-2 leading-tight"
          *ngIf="
            workExperienceForm.get('company')?.touched &&
            workExperienceForm.get('company')?.errors
          "
        >
          <span
            class="font-medium text-red-500 leading-tight"
            *ngIf="workExperienceForm.get('company')?.errors?.['required']"
          >
            El campo de empresa es requerido.
          </span>
          <span
            class="font-medium text-red-500 leading-tight"
            *ngIf="workExperienceForm.get('company')?.errors?.['minLength']"
          >
            El campo de empresa debe tener al menos 3 caracteres.
          </span>
          <span
            class="font-medium text-orange-500 leading-tight"
            *ngIf="workExperienceForm.get('company')?.errors?.['stringType']"
          >
            Solo puedes ingresar letras.
          </span>
        </div>

        <app-text-input
          [id]="'puesto'"
          label="Puesto"
          placeholder="Puesto en la empresa"
          [value]="positionValue"
          formControlName="position"
        >
        </app-text-input>

        <div
          class="grid gap-2 leading-tight"
          *ngIf="
            workExperienceForm.get('position')?.touched &&
            workExperienceForm.get('position')?.errors
          "
        >
          <span
            class="font-medium text-red-500 leading-tight"
            *ngIf="workExperienceForm.get('position')?.errors?.['required']"
          >
            El campo de puesto es requerido.
          </span>
          <span
            class="font-medium text-red-500 leading-tight"
            *ngIf="workExperienceForm.get('position')?.errors?.['minLength']"
          >
            El campo de puesto debe tener al menos 3 caracteres.
          </span>
          <span
            class="font-medium text-orange-500 leading-tight"
            *ngIf="workExperienceForm.get('position')?.errors?.['stringType']"
          >
            Solo puedes ingresar letras.
          </span>
        </div>

        <div class="grid gap-4 md:grid-cols-2">
          <app-date-input
            [id]="'anio-mes-inicio'"
            label="Año y mes de inicio"
            placeholder="Fecha de inicio"
            formControlName="startDate"
          >
          </app-date-input>

          <app-date-input
            [id]="'anio-mes-fin'"
            label="Año y mes final"
            placeholder="Fecha de fin"
            [value]="endDateValue"
            [isDisabled]="disableEndDateInput"
            formControlName="endDate"
          >
          </app-date-input>
        </div>
        <div class="grid gap-4 md:grid-cols-2"></div>
        <app-checkbox-input
          [id]="'anio-mes-add'"
          label="Hasta la actualidad"
          [isChecked]="isCurrentlyWorking"
          (isCheckedChange)="endDateIfChecked($event)"
          formControlName="isCurrentlyWorking"
        ></app-checkbox-input>

        <div
          class="grid gap-2 leading-tight"
          *ngIf="
            (workExperienceForm.get('startDate')?.touched && workExperienceForm.get('startDate')?.errors?.['required']) ||
            (workExperienceForm.get('endDate')?.touched && workExperienceForm.get('endDate')?.errors?.['required'])
          "
        >
          <span class="font-medium text-red-500 leading-tight">
            Ambas fechas son obligatorias.
          </span>
        </div>
        <div class="grid gap-2 leading-tight" *ngIf="workExperienceForm.errors">
          <span
            class="font-medium text-orange-500 leading-tight"
            *ngIf="workExperienceForm.errors['dateGreaterThan']"
          >
            La fecha de inicio debe ser anterior a la fecha de finalización.
          </span>
        </div>
      </div>
    </div>
    <app-cancel-save-buttons
      [modal_id]="modal_id"
      [save_button_id]="'save-experience'"
      [form]="workExperienceForm"
      (cancelClicked)="cancelForm()"
    ></app-cancel-save-buttons>
  </form>
</app-base-modal-form>
